{"remainingRequest":"/Users/xl/xlxlxl/rss-web/client/node_modules/babel-loader/lib/index.js!/Users/xl/xlxlxl/rss-web/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xl/xlxlxl/rss-web/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xl/xlxlxl/rss-web/client/src/page/LoginRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xl/xlxlxl/rss-web/client/src/page/LoginRegister.vue","mtime":1663294546255},{"path":"/Users/xl/xlxlxl/rss-web/client/babel.config.js","mtime":1663294546246},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/cache-loader/dist/cjs.js","mtime":1663294660763},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/babel-loader/lib/index.js","mtime":1653875377507},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/cache-loader/dist/cjs.js","mtime":1663294660763},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/vue-loader/lib/index.js","mtime":1663294661325}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/xl/xlxlxl/rss-web/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\nimport CustomInput from \"../components/CustomInput\";\nimport UserAPI from \"../api/user\";\nexport default {\n  name: 'login-register-page',\n  components: {\n    CustomInput: CustomInput\n  },\n  data: function data() {\n    return {\n      isRegister: false,\n      welcomeInfo: {},\n      loginInfo: {\n        email: '',\n        passwd: ''\n      },\n      registerInfo: {\n        email: '',\n        passwd: '',\n        confirmPasswd: ''\n      }\n    };\n  },\n  created: function () {\n    var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var res;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.$http.get('https://v1.hitokoto.cn/?c=a');\n\n            case 2:\n              res = _context.sent;\n              this.welcomeInfo = res.data;\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  methods: {\n    handleLogin: function () {\n      var _handleLogin = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!this.loginInfo.email || !this.loginInfo.passwd)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                //密码 邮箱不能为空\n                this.$Message.error('邮箱或密码不能为空');\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _context2.next = 5;\n                return UserAPI.login(this.loginInfo);\n\n              case 5:\n                res = _context2.sent;\n\n                if (res.data.status) {\n                  this.$store.user = res.data.data;\n                  this.$router.push('/home');\n                } else {\n                  this.$Message.error(res.data.data);\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleLogin() {\n        return _handleLogin.apply(this, arguments);\n      }\n\n      return handleLogin;\n    }(),\n    handleRegister: function () {\n      var _handleRegister = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(!this.registerInfo.email || !this.registerInfo.passwd)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                //密码 邮箱不能为空\n                this.$Message.error('邮箱或密码不能为空');\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                if (!(this.registerInfo.passwd !== this.registerInfo.confirmPasswd)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                this.$Message.error('两次密码不一样');\n                return _context3.abrupt(\"return\");\n\n              case 6:\n                _context3.next = 8;\n                return UserAPI.register(this.registerInfo);\n\n              case 8:\n                res = _context3.sent;\n\n                if (res.data.status) {\n                  this.$Message.success('注册成功');\n                } else {\n                  this.$Message.error(res.data.data);\n                }\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleRegister() {\n        return _handleRegister.apply(this, arguments);\n      }\n\n      return handleRegister;\n    }()\n  }\n};",{"version":3,"mappings":";;AA8CA;AACA;AAEA;EACAA,2BADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IACA;MACAC,iBADA;MAEAC,eAFA;MAGAC;QACAC,SADA;QAEAC;MAFA,CAHA;MAOAC;QACAF,SADA;QAEAC,UAFA;QAGAE;MAHA;IAPA;EAaA,CAnBA;EAoBAC,OApBA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAqBA,6CArBA;;YAAA;cAqBAC,GArBA;cAsBA;;YAtBA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IAAA;MAAA;IAAA;;IAAA;EAAA;EAwBAC;IACAC,WADA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAEA,+CAFA;kBAAA;kBAAA;gBAAA;;gBAGA;gBACA;gBAJA;;cAAA;gBAAA;gBAAA,OAQAC,6BARA;;cAAA;gBAQAH,GARA;;gBASA;kBACA;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;cAdA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;IAgBAI,cAhBA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAiBA,qDAjBA;kBAAA;kBAAA;gBAAA;;gBAkBA;gBACA;gBAnBA;;cAAA;gBAAA,MAuBA,4DAvBA;kBAAA;kBAAA;gBAAA;;gBAwBA;gBAxBA;;cAAA;gBAAA;gBAAA,OA4BAD,mCA5BA;;cAAA;gBA4BAH,GA5BA;;gBA6BA;kBACA;gBACA,CAFA,MAEA;kBACA;gBACA;;cAjCA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;AAxBA","names":["name","components","CustomInput","data","isRegister","welcomeInfo","loginInfo","email","passwd","registerInfo","confirmPasswd","created","res","methods","handleLogin","UserAPI","handleRegister"],"sourceRoot":"src/page","sources":["LoginRegister.vue"],"sourcesContent":["<template>\n    <div class=\"login-register-page\">\n        <div class=\"center-content\">\n            <div class=\"left-part\">\n                <h1>Welcome!!</h1>\n                <p>{{ welcomeInfo.hitokoto }}</p>\n                <p>- 「 {{ welcomeInfo.from }} 」</p>\n            </div>\n            <transition\n                enter-active-class=\"animated fadeIn\"\n                leave-active-class=\"animated fadeOut\"\n                mode=\"out-in\"\n                :duration=\"500\">\n                <!-- 登录 -->\n                 <div class=\"right-part\" v-if=\"!isRegister\" key=\"login\">\n                    <div class=\"form\" @keyup.enter=\"handleLogin\">\n                        <CustomInput label=\"邮箱\" v-model=\"loginInfo.email\"/>\n                        <CustomInput label=\"密码\" type=\"password\" v-model=\"loginInfo.passwd\"/>\n                    </div>\n                    <div class=\"action\">\n                        <div class=\"login-button\" @click=\"handleLogin\">登录</div>\n                        <div class=\"register-button\" @click=\"isRegister=!isRegister\">注册</div>\n                    </div>\n                    <p class=\"forget-passwd-button\">忘记密码 ?</p>\n                </div>\n                <!-- 注册 -->\n                <div class=\"right-part\" v-else key=\"register\">\n                    <div class=\"close-btn\" @click=\"isRegister=!isRegister\">\n                        <Icon type=\"md-close\" />\n                    </div>\n                    <div class=\"form\" @keyup.enter=\"handleRegister\">\n                        <CustomInput label=\"邮箱\" v-model=\"registerInfo.email\"/>\n                        <CustomInput label=\"密码\" type=\"password\" v-model=\"registerInfo.passwd\"/>\n                        <CustomInput label=\"确认密码\" type=\"password\" v-model=\"registerInfo.confirmPasswd\" />\n                    </div>\n                    <div class=\"action\">\n                        <div class=\"register-button\" @click=\"handleRegister\">注册</div>\n                    </div>\n                </div>\n            </transition>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport CustomInput from '../components/CustomInput'\nimport UserAPI from '../api/user'\n\nexport default {\n    name:'login-register-page',\n    components:{\n        CustomInput\n    },\n    data(){\n        return {\n            isRegister : false,\n            welcomeInfo:{},\n            loginInfo:{\n                email:'',\n                passwd:''\n            },\n            registerInfo:{\n                email:'',\n                passwd:'',\n                confirmPasswd:''\n            }\n        }\n    },\n    async created(){\n        const res = await this.$http.get('https://v1.hitokoto.cn/?c=a');\n        this.welcomeInfo = res.data;\n    },\n    methods:{\n        async handleLogin(){\n            if(!this.loginInfo.email || !this.loginInfo.passwd){\n                //密码 邮箱不能为空\n                this.$Message.error('邮箱或密码不能为空');\n                return;\n            }\n\n            const res = await UserAPI.login(this.loginInfo);\n            if(res.data.status){\n                this.$store.user = res.data.data;\n                this.$router.push('/home');\n            }else{\n                this.$Message.error(res.data.data);\n            }\n        },\n        async handleRegister(){\n            if(!this.registerInfo.email || !this.registerInfo.passwd){\n                //密码 邮箱不能为空\n                this.$Message.error('邮箱或密码不能为空');\n                return;\n            }\n\n            if(this.registerInfo.passwd !== this.registerInfo.confirmPasswd){\n                this.$Message.error('两次密码不一样');\n                return;\n            }\n\n            const res = await UserAPI.register(this.registerInfo);\n            if(res.data.status){\n                this.$Message.success('注册成功');\n            }else{\n                this.$Message.error(res.data.data);\n            }\n        }\n    }\n}\n</script>\n\n\n<style lang=\"scss\">\n.login-register-page{\n    width: 100vw;\n    height: 100vh;\n    background:$theme-color-1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .center-content{\n        width: 50vw;\n        height: 60vh;\n        display: flex;\n        border-radius: 3px;\n        overflow: hidden;\n        box-shadow: 0 0 15px 0 $theme-color-3;\n\n        .left-part{\n            width: 50%;\n            height: 100%;\n            background: $theme-color-2;\n            color: $theme-color-white;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n\n            h1{\n                margin-bottom: 30px;\n                font-weight: 900;\n            }\n\n            p:last-child{\n                text-align: right;\n                margin-top: 10px;\n            }\n        }\n\n        .right-part{\n            position: relative;\n            width: 50%;\n            height: 100%;\n            background: $theme-color-white;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            padding: 8%;\n\n            .form{\n                display: flex;\n                flex-direction: column;\n            }\n\n            .action{\n                margin-top: 30px;\n                display: flex;\n                justify-content: center;\n\n                div{\n                    padding: 5px;\n                    color: white;\n                    width: 40%;\n                    cursor: pointer;\n                    border-radius: 5px;\n                    box-shadow: 0 0 1px 1px #e0dede;\n                }\n\n                .login-button{\n                    background:$theme-color-2;\n                    margin-right: 10%;\n                }\n\n                .register-button{\n                    background: $theme-color-1;\n                }\n            }\n\n            .forget-passwd-button{\n                color: gray;\n                margin-top: 20px;\n                font-size: 14px;\n                cursor: pointer;\n                \n                &:hover{\n                    text-decoration: underline;\n                }\n            }\n\n            .close-btn{\n                position: absolute;\n                right: 20px;\n                top: 20px;\n                background: $theme-color-1;\n                color: white;\n                height: 20px;\n                width: 20px;\n                text-align: center;\n                line-height: 20px;\n                border-radius: 10px;\n                cursor: pointer;    \n            }\n        }\n    }\n}\n</style>\n"]}]}