{"remainingRequest":"/Users/xl/xlxlxl/rss-web/client/node_modules/babel-loader/lib/index.js!/Users/xl/xlxlxl/rss-web/client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/xl/xlxlxl/rss-web/client/src/main.js","dependencies":[{"path":"/Users/xl/xlxlxl/rss-web/client/src/main.js","mtime":1663294546254},{"path":"/Users/xl/xlxlxl/rss-web/client/babel.config.js","mtime":1663294546246},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/cache-loader/dist/cjs.js","mtime":1663294660763},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/babel-loader/lib/index.js","mtime":1653875377507},{"path":"/Users/xl/xlxlxl/rss-web/client/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1656382710823}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/xl/xlxlxl/rss-web/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\nimport \"/Users/xl/xlxlxl/rss-web/client/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/xl/xlxlxl/rss-web/client/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/xl/xlxlxl/rss-web/client/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/xl/xlxlxl/rss-web/client/node_modules/core-js/modules/es7.promise.finally.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport axios from 'axios';\nimport moment from 'moment';\nimport iView from 'iview';\nimport 'iview/dist/styles/iview.css';\nimport 'animate.css';\nimport App from \"./App.vue\";\nimport LoginRegisterPage from \"./page/LoginRegister\";\nimport HomePage from \"./page/home\";\nimport isAuth from \"./api/auth\";\nimport { store } from \"./store\";\nVue.use(iView);\nVue.use(VueRouter);\nVue.config.productionTip = false; //添加路由\n\nvar routes = [{\n  path: '/login',\n  component: LoginRegisterPage\n}, {\n  path: '/home',\n  component: HomePage\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  routes: routes\n}); //全局前置守卫路由 对于非白名单的页面进行登录验证\n\nrouter.beforeEach( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(to, from, next) {\n    var path, whiteList, res;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            path = to.path;\n            console.log('path', path);\n            whiteList = ['/login'];\n\n            if (!whiteList.includes(path)) {\n              _context.next = 7;\n              break;\n            }\n\n            next();\n            _context.next = 12;\n            break;\n\n          case 7:\n            _context.next = 9;\n            return isAuth();\n\n          case 9:\n            res = _context.sent;\n            console.log('res', res.data);\n\n            if (res.data.status) {\n              store.user = res.data.data;\n              next();\n            } else {\n              next('/login');\n            }\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}()); //添加全局属性\n\nVue.use({\n  install: function install(Vue, options) {\n    Vue.prototype.$http = axios;\n    Vue.prototype.$store = store;\n    Vue.prototype.$moment = moment;\n    moment.locale('zh-cn');\n  }\n});\nnew Vue({\n  render: function render(h) {\n    return h(App);\n  },\n  router: router\n}).$mount('#app');",{"version":3,"names":["Vue","VueRouter","axios","moment","iView","App","LoginRegisterPage","HomePage","isAuth","store","use","config","productionTip","routes","path","component","router","mode","beforeEach","to","from","next","console","log","whiteList","includes","res","data","status","user","install","options","prototype","$http","$store","$moment","locale","render","h","$mount"],"sources":["/Users/xl/xlxlxl/rss-web/client/src/main.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport axios from 'axios'\nimport moment from 'moment'\n\nimport iView from 'iview'\nimport 'iview/dist/styles/iview.css'\nimport 'animate.css'\n\nimport App from './App.vue'\nimport LoginRegisterPage from './page/LoginRegister'\nimport HomePage from './page/home'\nimport isAuth from './api/auth'\nimport { store } from './store'\n\n\nVue.use(iView)\nVue.use(VueRouter)\n\nVue.config.productionTip = false\n\n//添加路由\nconst routes = [\n    { path: '/login', component: LoginRegisterPage },\n    { path: '/home', component: HomePage }\n]\n\nconst router = new VueRouter({\n    mode: 'history',\n    routes\n})\n\n//全局前置守卫路由 对于非白名单的页面进行登录验证\nrouter.beforeEach(async (to, from, next) => {\n    const path = to.path\n    console.log('path',path)\n    const whiteList = ['/login']\n    if(whiteList.includes(path)){\n        next()\n    }else{\n        const res = await isAuth()\n        console.log('res',res.data);\n        if(res.data.status){\n            store.user=res.data.data;\n            next()\n        }else{\n            next('/login')\n        }\n    }\n})\n\n//添加全局属性\nVue.use({\n    install(Vue, options){\n        Vue.prototype.$http=axios;\n        Vue.prototype.$store=store;\n        Vue.prototype.$moment=moment;\n        moment.locale('zh-cn');\n    }\n})\n\nnew Vue({\n  render: h => h(App),\n  router,\n}).$mount('#app')\n"],"mappings":";;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,6BAAP;AACA,OAAO,aAAP;AAEA,OAAOC,GAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,QAAP;AACA,OAAOC,MAAP;AACA,SAASC,KAAT;AAGAT,GAAG,CAACU,GAAJ,CAAQN,KAAR;AACAJ,GAAG,CAACU,GAAJ,CAAQT,SAAR;AAEAD,GAAG,CAACW,MAAJ,CAAWC,aAAX,GAA2B,KAA3B,C,CAEA;;AACA,IAAMC,MAAM,GAAG,CACX;EAAEC,IAAI,EAAE,QAAR;EAAkBC,SAAS,EAAET;AAA7B,CADW,EAEX;EAAEQ,IAAI,EAAE,OAAR;EAAiBC,SAAS,EAAER;AAA5B,CAFW,CAAf;AAKA,IAAMS,MAAM,GAAG,IAAIf,SAAJ,CAAc;EACzBgB,IAAI,EAAE,SADmB;EAEzBJ,MAAM,EAANA;AAFyB,CAAd,CAAf,C,CAKA;;AACAG,MAAM,CAACE,UAAP;EAAA,mEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;IAAA;IAAA;MAAA;QAAA;UAAA;YACRP,IADQ,GACDK,EAAE,CAACL,IADF;YAEdQ,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBT,IAAnB;YACMU,SAHQ,GAGI,CAAC,QAAD,CAHJ;;YAAA,KAIXA,SAAS,CAACC,QAAV,CAAmBX,IAAnB,CAJW;cAAA;cAAA;YAAA;;YAKVO,IAAI;YALM;YAAA;;UAAA;YAAA;YAAA,OAOQb,MAAM,EAPd;;UAAA;YAOJkB,GAPI;YAQVJ,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBG,GAAG,CAACC,IAAtB;;YACA,IAAGD,GAAG,CAACC,IAAJ,CAASC,MAAZ,EAAmB;cACfnB,KAAK,CAACoB,IAAN,GAAWH,GAAG,CAACC,IAAJ,CAASA,IAApB;cACAN,IAAI;YACP,CAHD,MAGK;cACDA,IAAI,CAAC,QAAD,CAAJ;YACH;;UAdS;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAlB;;EAAA;IAAA;EAAA;AAAA,K,CAkBA;;AACArB,GAAG,CAACU,GAAJ,CAAQ;EACJoB,OADI,mBACI9B,GADJ,EACS+B,OADT,EACiB;IACjB/B,GAAG,CAACgC,SAAJ,CAAcC,KAAd,GAAoB/B,KAApB;IACAF,GAAG,CAACgC,SAAJ,CAAcE,MAAd,GAAqBzB,KAArB;IACAT,GAAG,CAACgC,SAAJ,CAAcG,OAAd,GAAsBhC,MAAtB;IACAA,MAAM,CAACiC,MAAP,CAAc,OAAd;EACH;AANG,CAAR;AASA,IAAIpC,GAAJ,CAAQ;EACNqC,MAAM,EAAE,gBAAAC,CAAC;IAAA,OAAIA,CAAC,CAACjC,GAAD,CAAL;EAAA,CADH;EAENW,MAAM,EAANA;AAFM,CAAR,EAGGuB,MAHH,CAGU,MAHV"}]}